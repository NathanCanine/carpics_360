window.DisableCarpicsAnalytics?CarPicsGoogleAnalytics=function(){}:(!function(e,t,i,s,n,o,r){e.GoogleAnalyticsObject=n,e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},e[n].l=1*new Date,o=t.createElement(i),r=t.getElementsByTagName(i)[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",r.parentNode.insertBefore(o,r)}(window,document,"script",0,"CarPicsGoogleAnalytics"),CarPicsGoogleAnalytics("create","UA-101099694-1","auto"),CarPicsGoogleAnalytics("send","pageview",{dimension3:"Page view"}));var CarPicsSpinnerAPI=function(){return this.CarPicsSpinners=function(e){this.spinners={},this.makeBoundGetRequest=function(e,t){return function(i){t.spinners[e.divId].spinner=new CarPicsSpinner(e,i),t.spinners[e.divId].spinStatus=!1}},this.addSpinner=function(e,t){this.spinners[e.divId]={spinner:new CarPicsSpinner(e,t),spinStatus:!1}},this.makeSpinner=function(e){this.spinners[e.divId]={spinStatus:!1,spinner:{}},$.get(e.sourceURL,{},this.makeBoundGetRequest(e,this),"json")};for(var t=0;t<e.spinners.length;t++)this.makeSpinner(e.spinners[t])},this.CarPicsSpinner=function(e,t){if(this.StartTime=Date.now(),this.connectionsFinished=0,this.divId=e.divId,null===t||void 0===t||0==t.length)return(i=document.getElementById(this.divId)).style.backgroundImage="url('http://resources.carpics2p0.com/Rotation/checkerboard-backgrounds-wallpapers.jpg')",void(i.style.repeat="repeat");if(this.data=t,this.numberOfConnections=e.numberOfConnections>0?e.numberOfConnections:4,this.AllLoded=!1,this.AllLoadedFunctions=[],this.turnStatus=!1,this.turning=!1,this.lastTouch=0,this.autospinSleep=e.autospinSleep>0?e.autospinSleep:100,this.mouseDisabled=e.disableMouse||!1,this.zoomed=!1,this.spinSensitivity=parseInt(e.spinSensitivity)>0?parseInt(e.spinSensitivity):5,this.direction=e.autospinDirection||1,"false"==e.spinOnLoad?this.spinDefault="true"==e.autospin||!1:this.spinDefault=!1,this.spinStatus=this.spinDefault,this.mouseXPosition,this.mouseYPosition,void 0!==e.overrideSize&&(e.overrideSize.width,!0)&&(e.overrideSize.height,!0)){var i=document.getElementById(this.divId);i.style.width=e.overrideSize.width,i.style.height=e.overrideSize.height}if(this.spinnerDiv=document.getElementById(this.divId),void 0!==e.overlaySource&&null!==e.overlaySource){this.spinnerOverlay=document.createElement("div"),this.spinnerOverlay.style.height="100%",this.spinnerOverlay.style.width="100%",this.spinnerOverlay.style.zIndex=100,this.spinnerOverlay.style.position="absolute";var s=new Image;s.src=e.overlaySource,s.style.width="80%",s.style.height="auto",s.style.position="absolute",s.style.margin="auto",s.style.top=0,s.style.right=0,s.style.bottom=0,s.style.left=0,this.spinnerOverlay.onmouseover=function(e){return function(t){e.style.visibility="hidden"}}(s),this.spinnerOverlay.onmouseout=function(e){return function(t){e.style.visibility=""}}(s),this.spinnerOverlay.appendChild(s),this.spinnerDiv.appendChild(this.spinnerOverlay)}this.loadCyclic=function(){this.LoadCursor.Index;var e=0,t=!0;if(this.LoadCursor.Index==this.LoadCursor.NextImage.Index){if(1==this.AllImages.length)return;e=Math.floor(this.AllImages.length/2)-1,this.addImageAtCursor(e),t=!1}else for(var i=0;i<this.AllImages.length;i++){if(this.LoadCursor.NextImage.Index-this.LoadCursor.Index!=1&&this.LoadCursor.Index!=this.AllImages.length-1){e=0==this.LoadCursor.NextImage.Index?this.LoadCursor.Index+Math.floor((this.AllImages.length-this.LoadCursor.Index)/2):this.LoadCursor.Index+Math.floor((this.LoadCursor.NextImage.Index-this.LoadCursor.Index)/2),this.addImageAtCursor(e),t=!1;break}this.LoadCursor=this.LoadCursor.NextImage}return t},this.loadLinear=function(){var e=0;return!(this.LoadCursor.Index-this.LoadCursor.NextImage.Index!=1||!this.LoadCursor.NextImage)||(this.LinearReference.goLeft()?(e=0==this.LoadCursor.NextImage.Index?this.AllImages.length-1:this.LoadCursor.NextImage.Index-1,this.addImageAtCursor(e),this.LoadCursor=this.LoadCursor.PreviousImage.PreviousImage):(e=this.LoadCursor.Index+1,this.addImageAtCursor(e),this.LoadCursor=this.LoadCursor.PreviousImage),this.LoadCursor.NextImage.Index-this.LoadCursor.Index==1)},this.loadNextImage=function(){if(void 0===this.LinearReference)e=this.loadCyclic();else var e=this.loadLinear();e&&(this.connectionsFinished++,this.onAllLoaded())},this.onAllLoaded=function(){for(var e=0;e<this.AllLoadedFunctions.length;e++)"function"==typeof this.AllLoadedFunctions[e]&&this.AllLoadedFunctions[e]();this.AllLoadedFunctions={length:0,push:function(e){"function"==typeof e&&e()}}},this.addImageAtCursor=function(e){nextNext=this.LoadCursor.NextImage,this.LoadCursor.NextImage=new CarPicsImage(this.data[e],e,this.divId,this.getNextImage(this)),this.spinnerDiv.appendChild(this.LoadCursor.NextImage.HTMLElement),this.LoadCursor.PreviousImage===this.LoadCursor&&(this.LoadCursor.PreviousImage=this.LoadCursor.NextImage),nextNext.PreviousImage=this.LoadCursor.NextImage,this.AllImages[e]=this.LoadCursor.NextImage,this.LoadCursor.NextImage.PreviousImage=this.LoadCursor,this.LoadCursor.NextImage.NextImage=nextNext,this.LoadCursor=nextNext},this.getNextImage=function(e){return function(){e.loadNextImage()}},this.zoomToggle=function(e,t){return 1==this.zoomed?(this.CurrentImage.unzoom(),this.spinStatus=!1,this.zoomed=!1,!0):(this.pauseMouseTime=Date.now()+500,this.zoomed=!0,this.spinStatus=!1,this.CurrentImage.zoom(e,t),!1)},this.displayNextImage=function(e){var t,i;void 0===e?(t=this.direction,i=!0):(t=e,i=!1);var s;if(this.spinStatus||!i){if(1==t)s=this.CurrentImage.NextImage;else{if(-1!=t)return;s=this.CurrentImage.PreviousImage}for(var n=0;n<this.AllImages.length&&!s.isReady;n++)1==t?s=s.NextImage:-1==t&&(s=s.PreviousImage);if(s.isReady){this.spinnerDiv.style.backgroundImage="url('"+this.CurrentImage.sourceObject.src+"')",this.spinnerDiv.style.backgroundSize="100% 100%";var o=this.CurrentImage;this.CurrentImage=s,this.CurrentImage.HTMLElement.style.display="block",o.HTMLElement.style.display="none"}}},this.mouseDisabled||($(document).on("mousedown","#"+this.divId,function(e){return function(t){t.preventDefault();Date.now();e.zoomed||2===t.button||(e.interacted&&(CarPicsGoogleAnalytics("send","pageview",{dimension1:"Click"}),e.interacted=!0),CarPicsGoogleAnalytics("send","pageview",{dimension1:"Click"}),e.spinStatus=!1,e.turnStatus=!0,e.mouseXPosition=t.pageX,e.mouseYPosition=t.pageY,e.spinnerDiv.style.cursor="-webkit-move",e.spinnerDiv.style.cursor="move",e.spinnerDiv.style.cursor="-moz-move")}}(this)),$(document).on("dblclick","#"+this.divId,function(e){return function(t){CarPicsGoogleAnalytics("send","pageview",{dimension2:"Doubleclick"}),t.preventDefault();e.zoomToggle(t);!0===e.zoomed?(e.spinStatus=!1,e.turnStatus=!1):(e.spinStatus=e.spinDefault,e.turnStatus=!1)}}(this)),$(document).on("taphold","#"+this.divId,function(e){return function(t){if(1!=e.turning){e.interacted&&(CarPicsGoogleAnalytics("send","pageview",{dimension1:"Taphold"}),e.interacted=!0),CarPicsGoogleAnalytics("send","pageview",{dimension2:"Taphold"}),t.preventDefault();e.zoomToggle(t,{x:e.mouseXPosition,y:e.mouseYPosition});!0===e.zoomed?(e.spinStatus=!1,e.turnStatus=!1):(e.spinStatus=e.spinDefault,e.turnStatus=!1)}}}(this)),$(document).on("mouseup",function(e){return function(t){t.preventDefault(),e.zoomed||e.mouseDisabled||(e.spinStatus=e.spinDefault,e.turnStatus=!1,e.turning=!1,e.spinnerDiv.style.cursor="-webkit-grab",e.spinnerDiv.style.cursor="grab",e.spinnerDiv.style.cursor="-moz-grab")}}(this)),$(document).on("mousemove",function(e){return function(t){if(!(e.pauseMouseTime>Date.now()||!0!==e.turnStatus&&!0!==e.zoomed)){var i=t.pageX,s=t.pageY;if(1==e.zoomed)e.CurrentImage.move(i,s);else{for(;e.mouseXPosition-i>e.spinSensitivity;)e.turning=!0,e.displayNextImage(1),e.mouseYPosition=s,e.mouseXPosition=e.mouseXPosition-e.spinSensitivity;for(;i-e.mouseXPosition>e.spinSensitivity;)e.turning=!0,e.displayNextImage(-1),e.mouseYPosition=s,e.mouseXPosition=e.mouseXPosition+e.spinSensitivity}}}}(this)),$("#"+this.divId).bind("touchstart",function(e){return function(t){t.preventDefault(),t.returnValue=!1;Date.now();if(!e.zoomed){e.interacted&&(CarPicsGoogleAnalytics("send","pageview",{dimension1:"Touchstart"}),e.interacted=!0),CarPicsGoogleAnalytics("send","pageview",{dimension2:"Touchstart"}),e.spinStatus=!1,e.turnStatus=!0;var i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e.mouseXPosition=i.pageX,e.mouseYPosition=i.pageY,$("#"+e.divId).bind("touchmove",function(t){return function(i){if(i.preventDefault(),!(t.pauseMouseTime>Date.now()||!0!==t.turnStatus&&!0!==t.zoomed)){var s=i.originalEvent.touches[0]||i.originalEvent.changedTouches[0],n=s.pageX,o=s.pageY;if(1==t.zoomed)t.CurrentImage.move(e.mouseXPosition,e.mouseYPosition);else{for(;t.mouseXPosition-n>t.spinSensitivity;)e.turning=!0,t.displayNextImage(1),t.mouseYPosition=o,t.mouseXPosition=e.mouseXPosition-e.spinSensitivity;for(;n-t.mouseXPosition>t.spinSensitivity;)t.mouseYPosition=o,t.mouseXPosition=e.mouseXPosition+e.spinSensitivity,e.turning=!0,t.displayNextImage(-1)}t.pauseMouseTime=Date.now()+25}}}(e))}}}(this)),$(document).on("touchend","#"+this.divId,function(e){return function(t){e.mouseDisabled||(e.spinStatus=e.spinDefault,e.turnStatus=!1,e.turning=!1,e.spinnerDiv.style.cursor="-webkit-grab",e.spinnerDiv.style.cursor="grab",e.spinnerDiv.style.cursor="-moz-grab",$("#"+e.divId).unbind("touchmove",function(e){}))}}(this))),this.setDefaultSpinnerStyles=function(){this.spinnerDiv.style.cursor="grab",this.spinnerDiv.style.cursor="-webkit-grab",this.spinnerDiv.style.cursor="-moz-grab",this.spinnerDiv.style.overflow="hidden"},this.CurrentImage=new CarPicsImage(t[0],0,this.divId,function(){}),this.CurrentImage.HTMLElement.style.display="block","true"===e.linear&&(this.LinearReference={nextLeft:!1,goLeft:function(){return this.nextLeft=!this.nextLeft,this.nextLeft}}),this.AllImages=new Array(t.length),this.AllImages[0]=this.CurrentImage,this.LoadCursor=this.CurrentImage,this.mouseDisabled||this.setDefaultSpinnerStyles(),this.spinnerDiv.appendChild(this.CurrentImage.HTMLElement),this.spinStatus&&setInterval(function(e){return function(){e.spinStatus&&e.displayNextImage()}}(this),this.autospinSleep),"true"==e.spinOnLoad&&this.AllLoadedFunctions.push(function(e){return function(){e.spinStatus=1,e.spinDefault=1,setInterval(function(e){return function(){e.spinStatus&&e.displayNextImage()}}(e),e.autospinSleep)}}(this));for(var n=0;n<this.numberOfConnections;n++)this.getNextImage(this,void 0)()},this.CarPicsImage=function(e,t,i,s){var n=function(e,t){return function(t){t&&(e.isReady=!0)}}(this);this.zoom=function(e,t){this.HTMLElement.getBoundingClientRect();this.HTMLElement.style.maxHeight="200%",this.HTMLElement.style.maxWidth="200%",this.HTMLElement.style.height="200%",this.HTMLElement.style.width="200%";var i="taphold"==e.type?t.x-window.scrollX:e.clientX,s="taphold"==e.type?t.y-window.scrollY:e.clientY;this.move(i,s)},this.unzoom=function(){this.HTMLElement.style.maxHeight="100%",this.HTMLElement.style.maxWidth="100%",this.HTMLElement.style.height="100%",this.HTMLElement.style.width="100%",this.HTMLElement.style.left="0px",this.HTMLElement.style.top="0px"},this.move=function(e,t){var i,s,n=this.HTMLElement.parentElement.getBoundingClientRect();e>n.left&&e<n.left+n.width&&t>n.top&&t<n.top+n.height&&(i=n.left-e,s=n.top-t,this.HTMLElement.style.left=i/document.documentElement.clientWidth*100+"vw",this.HTMLElement.style.top=s/document.documentElement.clientWidth*100+"vw")},this.setDefaultImageStyles=function(){this.HTMLElement.style.position="relative",this.HTMLElement.style.maxHeight="100%",this.HTMLElement.style.maxWidth="100%",this.HTMLElement.style.height="100%",this.HTMLElement.style.width="100%",this.HTMLElement.style.left="0vw",this.HTMLElement.style.top="0vw",this.imgElement.style.maxHeight="100%",this.imgElement.style.maxWidth="100%",this.imgElement.style.height="100%",this.imgElement.style.width="100%",this.HTMLElement.style.overflow="hidden",this.HTMLElement.style.transition="all .5s linear",this.HTMLElement.style.mozTransition="all .5s linear",this.HTMLElement.style.webkitTransition="all .5s linear",this.HTMLElement.style.oTransition="all .5s linear",this.HTMLElement.style.khtmlUserSelect="none",this.HTMLElement.style.display="none",this.HTMLElement.style.oUserSelect="none",this.HTMLElement.style.mozUserSelect="none",this.HTMLElement.style.webkitUserSelect="none",this.HTMLElement.style.userSelect="none",this.HTMLElement.ondragstart=function(){return!1}},this.imageLoadStart=Date.now(),this.NextImage=this,this.PreviousImage=this,this.Index=t,this.isReady=!1,this.sourceObject=e,this.elementId=i+"-"+e.src,this.imgElement=document.createElement("img"),this.HTMLElement=document.createElement("div"),this.HTMLElement.appendChild(this.imgElement),this.setDefaultImageStyles(),this.imgElement.setAttribute("src",e.src),this.HTMLElement.setAttribute("id",this.elementId),this.imgElement.addEventListener("load",function(){s(),n(!0)}),this.imgElement.addEventListener("error",function(){s(),n(!1)})},this}();$(document).ready(function(){for(var e=[],t=document.getElementsByClassName("carPicsSpinner"),i=0;i<t.length;i++){var s=t[i];e.push({numberOfConnections:s.getAttribute("numberOfConnections"),autospin:s.getAttribute("autospin"),autospinDirection:"left"==s.getAttribute("autospinDirection")?-1:1,spinOnLoad:s.getAttribute("spinOnLoad"),divId:s.getAttribute("id"),sourceURL:"http://api.carpics2p0.com/rest/spinner?dealer="+s.getAttribute("dealer")+"&vin="+s.getAttribute("vin"),autospinSleep:s.getAttribute("autospinSleep"),spinSensitivity:s.getAttribute("spinSensitivity"),disableMouse:s.getAttribute("disableMouse"),overrideSize:{overrideWidth:s.getAttribute("overrideWidth"),overrideHeight:s.getAttribute("overrideHeight")},overlaySource:s.getAttribute("overlaySource")})}new CarPicsSpinnerAPI.CarPicsSpinners({spinners:e})});